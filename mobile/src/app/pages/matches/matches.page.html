<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Partidos</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">matches</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-list>
    <ion-list-header>
      @if (matches.length > 0) {
      <ion-label>Proximos Partidos</ion-label>
      } @else if (matches.length === 0) {
      <ion-label>Sin partidos</ion-label>
      }
    </ion-list-header>

    @for (match of matches; track $index; let i = $index) {
    <ion-item>
      <ion-label>
        <h2>{{ match.home_team.name }} VS {{ match.away_team.name }}</h2>
        <p>{{ match.played_at | date:'d MMM yyyy, HH:mm a' }}</p>
      </ion-label>
      <ion-button (click)="openModal(match)" expand="block">
        <ion-icon name="sync-outline"></ion-icon>
      </ion-button>
    </ion-item>
    }

    <ion-modal
      id="match-modal"
      trigger="open-modal"
      (willDismiss)="onWillDismiss($event)"
    >
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-buttons slot="start">
              <ion-button (click)="cancel()">Cancelar</ion-button>
            </ion-buttons>
            <ion-buttons slot="end">
              <ion-button (click)="confirm()" [strong]="true"
                >Registrar</ion-button
              >
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding items-center justify-center">
          <ion-item lines="none">
            <ion-label class="ion-text-center"
              >Asignar resultado de partido</ion-label
            >
          </ion-item>
          <br />

          <form [formGroup]="updateResultForm" class="">
            <ion-item>
              <ion-input
                formControlName="home_score"
                [label]="selectedMatch?.home_team?.name + ' (Local)'"
                labelPlacement="stacked"
                type="number"
                placeholder="Número de goles"
              ></ion-input>
            </ion-item>
            <ion-item lines="none">
              <ion-label class="ion-text-center">Vs</ion-label>
            </ion-item>
            <ion-item>
              <ion-input
                formControlName="away_score"
                [label]="selectedMatch?.away_team?.name + ' (Visitante)'"
                labelPlacement="stacked"
                type="number"
                placeholder="Número de goles"
              ></ion-input>
            </ion-item>
          </form>
        </ion-content>
      </ng-template>
    </ion-modal>
  </ion-list>
</ion-content>

<ion-loading
  trigger="open-loading"
  message="Dismissing after 3 seconds..."
  duration="3000"
></ion-loading>
